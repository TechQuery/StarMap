!function(t){"function"==typeof define&&define.amd?define("StarMap",["jquery","jQueryKit"],t):"object"==typeof module?module.exports=t(require("jquery"),require("jQueryKit")):this.StarMap=t(this.jquery,this.jQueryKit)}(function(t,i){var e=function(i){function Color(t){t=t||0;var i=this.constructor;this.red=i.random(t),this.green=i.random(t),this.blue=i.random(t),this.style=i.getStyle(this.red,this.green,this.blue)}return t.extend(Color,{random:function(t){return 255*Math.random()+t},getStyle:function(t,i,e){return"rgba("+[Math.floor(t),Math.floor(i),Math.floor(e),.8].join(", ")+")"}}),Color}();return function(t,i,e,n){function StarMap(e,h,s,r){t.extend(n.call(this,e),{length:0,max:h||250,distance:s||100,radius:r||150}),this.context=this.$_View[0].getContext("2d"),this.context.lineWidth=.3,this.context.strokeStyle=new i(150).style;var o=this.pointer={x:30*this.width/100,y:30*this.height/100};this.$_View.on("mousemove",function(t){o.x=t.pageX,o.y=t.pageY}).on("mouseleave",function(){o.x=-100,o.y=-100})}return n.extend(StarMap,null,{move:function(){var i=this;return t.each(this,function(){this.y<0||this.y>i.height?this.vy=-this.vy:(this.x<0||this.x>i.width)&&(this.vx=-this.vx),this.x+=this.vx,this.y+=this.vy})},connect:function(){var i=this;return t.each(this,function(){for(var t=0;i[t];t++)this.x-i[t].x<i.distance&&this.y-i[t].y<i.distance&&this.x-i[t].x>-i.distance&&this.y-i[t].y>-i.distance&&this.x-i.pointer.x<i.radius&&this.y-i.pointer.y<i.radius&&this.x-i.pointer.x>-i.radius&&this.y-i.pointer.y>-i.radius&&(i.context.beginPath(),i.context.strokeStyle=this.mixColor(i[t]),i.context.moveTo(this.x,this.y),i.context.lineTo(i[t].x,i[t].y),i.context.stroke(),i.context.closePath())})},animate:function(){this.context.clearRect(0,0,this.width,this.height),t.each(this.move().connect(),e.prototype.draw),self.requestAnimationFrame(arguments.callee.bind(this))},render:function(){for(var t=0;t<this.max;t++)this[this.length++]=new e(this.width,this.height,this.context);self.requestAnimationFrame(this.animate.bind(this))}}),StarMap}(t,e,function(t,i){function Star(t,e,n){this.x=Math.random()*t,this.y=Math.random()*e,this.vx=Math.random()-.5,this.vy=Math.random()-.5,this.radius=Math.random(),this.color=new i,this.context=n}return Star.mixValue=function(t,i,e,n){return(t*i+e*n)/(i+n)},t.extend(Star.prototype,{draw:function(){this.context.beginPath(),this.context.fillStyle=this.color.style,this.context.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),this.context.fill()},mixColor:function(t){return i.getStyle(Star.mixValue(this.color.red,this.radius,t.color.red,t.radius),Star.mixValue(this.color.green,this.radius,t.color.red,t.radius),Star.mixValue(this.color.blue,this.radius,t.color.red,t.radius))}}),Star}(t,e),function(t){function CanvasView(i){return this.$_View=t(i),this.init(),t(self).on("resize",t.throttle(this.init.bind(this))),this}return t.Class.extend(CanvasView,null,{init:function(){var t=this.$_View.offsetParent();this.width=this.$_View[0].width=t.width(),this.height=this.$_View[0].height=t.height()}}),CanvasView}(t))});
//# sourceMappingURL=StarMap.min.js.map